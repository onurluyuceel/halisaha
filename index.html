<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halı Saha Ligi</title>
    <style>
        /* GENEL AYARLAR */
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #121212; color: white; padding-bottom: 50px; }
        
        /* NAVİGASYON (MENÜ) */
        .navbar { display: flex; justify-content: center; background: #1e1e1e; padding: 15px; border-bottom: 2px solid #333; position: sticky; top: 0; z-index: 100; }
        .nav-btn { background: none; border: none; color: #aaa; font-size: 1rem; margin: 0 15px; cursor: pointer; padding: 5px 10px; transition: 0.3s; }
        .nav-btn:hover { color: white; }
        .nav-btn.active { color: #4caf50; border-bottom: 2px solid #4caf50; font-weight: bold; }

        /* SAYFA İÇERİKLERİ */
        .page-section { display: none; padding: 20px; max-width: 800px; margin: 0 auto; }
        .active-section { display: block; }

        /* ANA SAYFA STİLİ */
        .welcome-box { text-align: center; margin-top: 50px; }
        .welcome-box h1 { font-size: 2.5rem; color: #4caf50; }

        /* OYUNCU LİSTESİ STİLİ */
        .players-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; text-align: center; }
        .player-card { background: #1e1e1e; padding: 10px; border-radius: 8px; border: 1px solid #333; }
        .player-img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #555; }
        .player-name { font-size: 0.9rem; margin-top: 5px; font-weight: bold; }
        .player-pos { font-size: 0.75rem; color: #888; }

        /* ADMIN PANELİ STİLİ */
        .admin-controls { display: none; background: #2c3e50; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e74c3c; }
        .admin-controls h3 { margin-top: 0; color: #e74c3c; }
        .input-group { margin-bottom: 10px; display: flex; gap: 10px; }
        input, select { padding: 8px; border-radius: 4px; border: none; width: 100%; }
        button.add-btn { background: #27ae60; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px; font-weight: bold; width: 100%; }
        
        /* JSON ÇIKTI KUTUSU */
        #json-output-area { display: none; margin-top: 20px; background: #000; padding: 10px; border: 1px dashed #4caf50; color: #4caf50; font-family: monospace; font-size: 0.8rem; word-break: break-all; }

        /* GİZLİ FOOTER */
        .footer-admin { text-align: center; margin-top: 50px; font-size: 0.8rem; color: #333; cursor: pointer; }
    </style>
</head>
<body>

    <div class="navbar">
        <button class="nav-btn active" onclick="showPage('home', this)">ANA SAYFA</button>
        <button class="nav-btn" onclick="showPage('matches', this)">MAÇLAR</button>
        <button class="nav-btn" onclick="showPage('players', this)">OYUNCULAR</button>
    </div>

    <div id="home" class="page-section active-section">
        <div class="welcome-box">
            <h1>HOŞ GELDİNİZ</h1>
            <p>Halı Saha Ligi Resmi Web Sitesi</p>
            <p style="color:#888;">Bu haftanın maçı için "Maçlar" sekmesine göz atın.</p>
        </div>
    </div>

    <div id="matches" class="page-section">
        <h2>Maç Fikstürü</h2>
        <p style="color:#888;">Henüz oynanmış maç verisi girilmedi.</p>
        
        <div class="admin-controls" id="admin-match-panel">
            <h3>Yönetici: Maç Ekle</h3>
            <p style="font-size:0.8rem;">Şimdilik sadece oyuncu ekleme aktif.</p>
        </div>
    </div>

    <div id="players" class="page-section">
        
        <div class="admin-controls" id="admin-player-panel">
            <h3> + Yeni Oyuncu Ekle</h3>
            <div class="input-group">
                <input type="text" id="new-name" placeholder="İsim (Örn: Ahmet)">
                <select id="new-pos">
                    <option value="GK">Kaleci (GK)</option>
                    <option value="DEF">Defans (DEF)</option>
                    <option value="OS">Orta Saha (OS)</option>
                    <option value="FW">Forvet (FW)</option>
                </select>
            </div>
            <button class="add-btn" onclick="generatePlayerJson()">JSON KODU OLUŞTUR</button>
            
            <div id="json-output-area">
                <p>Aşağıdaki kodu kopyala ve GitHub'daki players.json dosyasının EN SONUNA (köşeli parantezden önce) yapıştır:</p>
                <textarea id="json-result" style="width:100%; height:80px; background:#111; color:#fff; border:none;"></textarea>
            </div>
        </div>

        <h2>Oyuncu Kadrosu</h2>
        <div id="loading">Veriler Yükleniyor...</div>
        <div class="players-grid" id="players-container"></div>
    </div>

    <div class="footer-admin" onclick="adminLogin()">Yönetici Girişi</div>

    <script>
        // 1. SAYFA GEÇİŞLERİ
        function showPage(pageId, btn) {
            // Tüm sayfaları gizle
            document.querySelectorAll('.page-section').forEach(page => page.classList.remove('active-section'));
            // Tüm butonların aktifliğini kaldır
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            // Seçileni aç
            document.getElementById(pageId).classList.add('active-section');
            btn.classList.add('active');
        }

        // 2. OYUNCULARI ÇEK VE LİSTELE
        let allPlayers = []; // Oyuncuları hafızada tutalım

        fetch('players.json')
            .then(response => response.json())
            .then(data => {
                allPlayers = data;
                renderPlayers(data);
                document.getElementById('loading').style.display = 'none';
            })
            .catch(err => {
                document.getElementById('loading').innerHTML = "Veri okunamadı. JSON dosyasını kontrol et.";
                console.error(err);
            });

        function renderPlayers(players) {
            const container = document.getElementById('players-container');
            container.innerHTML = ''; // Temizle

            players.forEach(p => {
                // Renk kodlaması
                let posColor = '#888';
                if(p.position === 'GK') posColor = '#e67e22'; // Turuncu
                if(p.position === 'DEF') posColor = '#3498db'; // Mavi
                if(p.position === 'FW') posColor = '#e74c3c'; // Kırmızı

                const html = `
                    <div class="player-card">
                        <img src="${p.image}" class="player-img" onerror="this.src='https://via.placeholder.com/150'">
                        <div class="player-name">${p.name}</div>
                        <div class="player-pos" style="color:${posColor}">${p.position}</div>
                        <div style="font-size:0.7rem; color:#aaa; margin-top:5px;">Puan: ${p.rating}</div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // 3. ADMIN GİRİŞ SİSTEMİ
        function adminLogin() {
            const pass = prompt("Yönetici Şifresi Nedir?");
            if(pass === "1234") { // Şifreyi buradan değiştirebilirsin
                alert("Hoşgeldin Başkan! Ekleme panelleri açıldı.");
                document.getElementById('admin-player-panel').style.display = 'block';
                document.getElementById('admin-match-panel').style.display = 'block';
                localStorage.setItem('isAdmin', true); // Hatırla
            } else {
                alert("Hatalı şifre.");
            }
        }

        // Eğer daha önce giriş yaptıysa hatırla
        if(localStorage.getItem('isAdmin')) {
            document.getElementById('admin-player-panel').style.display = 'block';
            document.getElementById('admin-match-panel').style.display = 'block';
        }

        // 4. JSON OLUŞTURUCU (MANUEL EKLEME İÇİN)
        function generatePlayerJson() {
            const name = document.getElementById('new-name').value;
            const pos = document.getElementById('new-pos').value;
            
            // Yeni ID üret (Mevcutların en büyüğü + 1)
            const newId = allPlayers.length > 0 ? Math.max(...allPlayers.map(p => p.id)) + 1 : 1;

            if(!name) { alert("İsim yazmadın!"); return; }

            // JSON formatı oluştur
            const newObj = {
                id: newId,
                name: name,
                image: "https://i.pravatar.cc/150?u=" + newId, // Otomatik avatar
                position: pos,
                rating: 6.0, // Başlangıç puanı
                goals: 0
            };

            const jsonString = ",\n" + JSON.stringify(newObj, null, 2);
            
            document.getElementById('json-output-area').style.display = 'block';
            document.getElementById('json-result').value = jsonString;
        }
    </script>

</body>
</html>
